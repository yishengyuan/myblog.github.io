**课程大纲：Uniswap V2 交易公式推导**

### 1. 曲线图及基本概念
- 我们通过图表上的两个点，通过X和Y的差值来了解需要投入的代币数量以及可以获得的代币数量。
- 目标：推导出给定输入代币数量的情况下，计算输出代币数量的公式。
- 使用的曲线公式： \( x \times y = L^2 \)，其中 \( L \) 为常数，代表流动性池的恒定积。

### 2. 初始状态设定
- 假设自动化做市商（AMM）初始状态下，X 代币数量为 \( x_0 \)，Y 代币数量为 \( y_0 \)。
- Alice 进行交换操作，向池子中加入 \( dx \) 数量的 X 代币，并从池子中提取出相应的 Y 代币数量 \( dy \)。

### 3. 恒定乘积公式应用
- 根据 Uniswap 的恒定乘积模型，交易前后公式均需满足 \( x \times y = L^2 \)。
- 交易前：\( x_0 \times y_0 = L^2 \)
- 交易后：新状态下的 X 和 Y 数量需满足同样的公式，即
  \[
  (x_0 + dx) \times (y_0 - dy) = L^2
  \]

### 4. 推导交换公式
- 将交易前后的公式相等，得到：
  \[
  x_0 \times y_0 = (x_0 + dx) \times (y_0 - dy)
  \]
- 为了求解 \( dy \)，我们将公式重新排列并化简。
- 通过两边分别除以 \( x_0 + dx \)，并对 \( dy \) 进行整理，最终得到：
  \[
  dy = \frac{y_0 \times dx}{x_0 + dx}
  \]
  
### 5. 公式解释
- 该公式表示在已知初始代币数量 \( x_0 \)、\( y_0 \) 和输入代币 \( dx \) 的情况下，可以计算出 Alice 能获得的输出代币数量 \( dy \)。
- 假设没有任何交易手续费的情况下，该公式能够直接计算出输出代币数量。

### 6. 后续内容：交易手续费
- 本视频推导的公式假设交易手续费为零。
- 下一节视频中将对公式进行调整，引入交易手续费的计算。