### 从常数积 AMM 中移除流动性

1. **移除流动性时价格不变的规则**
   - 移除流动性时，移除后的价格必须与移除前的价格相同。为了确保价格保持不变，我们需要计算要移除的 token X 和 token Y 的数量。
2. **移除流动性时的数学原理**
   - 移除流动性时的数学原理与添加流动性时是相同的。当我们添加流动性时，确保添加后价格等于添加前的价格。对于移除流动性，数学原理类似，我们通过计算 token X 和 token Y 的移除数量，确保移除后价格保持一致。
3. **移除流动性时的计算公式**
   - 在移除流动性时，我们可以通过将 token X 和 token Y 的数量设为负值，使用与添加流动性时相同的数学方法来进行计算。
   - 该公式表明，当移除流动性时，要移除的 token X 和 token Y 数量的比率必须等于移除前的即时价格（即现货价格）。

### 关键点总结

- **移除流动性时**：确保移除后价格与移除前价格相同，计算方法与添加流动性时一致。
- **数学原理**：通过考虑移除的 token 数量，确保其比率与移除前的价格相匹配。