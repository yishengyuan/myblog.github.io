### Uniswap V2 Flash Swap 功能调用流程

1. **Flash Swap 发起流程**
   - 用户通过调用 Flash Swap 智能合约中的某个函数发起 Flash Swap 操作。
   - 智能合约调用 Uniswap V2 的 `swap` 函数，借取代币。
2. **借取代币**
   - Uniswap V2 Pair 合约在接收到 `swap` 调用后，会将用户请求的代币发送给智能合约。
   - 用户可以同时借取多个代币，无需先存入代币。
3. **Uniswap V2 Pair 合约的行为**
   - 发送代币后，Pair 合约会调用 `UniswapV2Call` 函数，允许智能合约执行自定义操作。
   - 智能合约在 `UniswapV2Call` 中可以执行 Arbitrage 等操作。
4. **自定义操作**
   - 在 `UniswapV2Call` 函数内，智能合约可以进行任何自定义操作，比如套利交易。
   - 完成自定义操作后，智能合约必须偿还借取的代币及其费用。
5. **偿还借款**
   - 智能合约需要偿还借取的代币，并支付相关的费用。
   - 如果借取的是两个代币（如 WETH 和 DAI），则需要支付两个代币的费用；如果只借取一个代币，则只需支付该代币的费用。
6. **成功与失败**
   - 如果智能合约按正确的金额（包括费用）偿还代币，`swap` 调用将成功终止。
   - 如果未能偿还正确的金额，则 `swap` 调用将失败，交易不会成功。
7. **总结**
   - 通过 `swap` 函数，智能合约可以借取 Uniswap V2 Pair 合约中的代币，在同一交易中完成借款、执行自定义操作并偿还代币及费用。