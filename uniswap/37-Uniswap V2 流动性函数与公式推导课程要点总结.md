### Uniswap V2 流动性函数与公式推导课程要点总结

1. **流动性函数的定义**
   - 流动池的价值通过一个函数来衡量，函数形式为 F(X, Y) = √(X * Y)，其中 X 和 Y 是池中 Token 的数量。
   - 该函数的动机来源于常数乘积 AMM 的方程 X * Y = L，当取两边的平方根时，得到 √(X * Y) = L。
2. **流动池曲线的形态**
   - 在图形计算器中观察到，当 L 的值较小时，曲线 X * Y = L² 看起来像字母 L，并且有一个圆角；当 L 增加时，曲线逐渐变得平坦，接近直线。
3. **推导 L1 - L0 / L0 = DX / x0**
   - L1 代表添加了 DX 和 DY 数量的 Token 后的流动性，L0 代表添加前的流动性。
   - L1 = F(X0 + DX, Y0 + DY)，L0 = F(X0, Y0)，所以我们需要计算 L1 和 L0 之差，得到：
     - (L1 - L0) / L0 = (F(X0 + DX, Y0 + DY) - F(X0, Y0)) / F(X0, Y0)
   - 将 F(X, Y) = √(X * Y) 代入公式，展开后得到上述等式。
4. **利用比率求解 DX 和 DY**
   - 由于我们知道添加流动性时，DY / DX 必须等于 Y0 / X0（即流动性提供的比例应与当前价格一致），所以可以通过这个关系替换 DY，进而得到简化后的方程：
     - DX / X0² = DY / Y0
5. **简化公式**
   - 通过简化公式并利用 X0 和 Y0 的关系，我们最终得到：
     - (L1 - L0) / L0 = DX / X0²
   - 该公式表明，当流动池的价值定义为 √(X * Y) 时，L1 - L0 与 L0 的比例等于 DX 与 X0 的平方比。
6. **进一步推导**
   - 通过相同的推导过程，DY / Y0 也可以用来得出类似的结果：
     - (L1 - L0) / L0 = DY / Y0
7. **总结**
   - 本节课推导了通过定义流动池价值为 √(X * Y) 的流动性函数，可以得出当提供流动性时，池中 Token 的比例与流动性增量的关系。