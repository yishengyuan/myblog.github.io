### Uniswap V2课程：股份销毁与提取代币公式推导

#### 要点总结

1. **变量定义**：

   - 总股份数 T：销毁前的流动池总股份数量。
   - 销毁股份数 S：用户销毁的股份数量。
   - 提取前流动池总价值 L0：流动池内的代币总价值（提取前）。
   - 提取后流动池总价值 L1：流动池内的代币总价值（提取后）。

2. **股份与流动池价值的比例关系**：

   - 销毁股份的比例等于流动池价值减少的比例：
     $$
     (T - S) / T = L1 / L0
     $$
     

   - 左边表示销毁后与销毁前的股份比例。

   - 右边表示提取后与提取前的流动池价值比例。

3. **提取代币数量公式推导**：

   - 提取的代币数量等于流动池价值减少量 

     L0−L1
     $$
     L0 - L1 = L0 \times (S / T)
     $$
     

   - 推导过程：

     1. 从比例关系出发，求解 L0 - L1。

     2. 最终得出公式 

     3. $$
        L0 - L1 = (S / T) \times L0
        $$

     4. 

4. **公式**：

   - 用户提取的代币数量： 

   - $$
     提取代币数量 = (S / T) \times L0
     $$

   - 

5. **公式应用示例**：

   - 流动池初始状态：

     - 总股份 T = 1,100，流动池总价值 L0 = 1,210 USDC。

   - 用户销毁 100 股份： 

   - $$
     提取代币数量 = (100 / 1,100) \times 1,210 = 110 USDC
     $$

     

   - 用户销毁 200 股份：

   - $$
     提取代币数量 = (200 / 1,100) \times 1,210 = 220 USDC
     $$

   - **总结**：

   - 提取代币数量的计算公式基于销毁股份的比例。
   - 确保股份销毁与流动池价值减少的动态一致性。
   - 公式简单易用，适用于 Uniswap V2 的流动性提取场景。

通过以上内容，学员能够理解股份销毁与代币提取的计算公式，并掌握其应用方法。