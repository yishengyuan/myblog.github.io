课程要点总结：Uniswap V2 协议的分层设计

1. **Uniswap V2 协议的结构**  
   Uniswap V2 协议由两个主要的代码库组成：
   - **核心代码库（V2 Core）**：主要包含管理流动性池的合约。
   
   https://github.com/Uniswap/v2-core
   
   - **外围代码库（V2 Periphery）**：包含路由器合约（Router），主要提供用户与协议交互的接口。
   
   https://github.com/Uniswap/v2-periphery
   
2. **核心代码库中的 `UniswapV2Pair` 合约**  
   - `UniswapV2Pair` 合约是核心代码库中的主要合约，负责管理两个代币的流动性池（即代币对）。
   - 此合约支持代币的交换功能，允许用户在代币对之间直接进行单跳（Single-hop）或多跳（Multi-hop）交易。

3. **外围代码库中的 `Router` 合约的角色**  
   - `Router` 合约存在于外围代码库中，作为一个实用合约，用于用户与核心合约的交互。
   - 主要功能：
     - **添加和移除流动性**：用户可以通过 `Router` 合约进行流动性池的添加和移除操作。
     - **代币交换**：在多个流动性池之间进行多跳交易。
   - **为什么使用 Router 合约**：
     - 核心的 `UniswapV2Pair` 合约并非为用户直接交互而设计，直接调用可能导致误操作。
     - `Router` 合约自动化了一些必要的函数调用，简化了代币交换的过程，降低用户出错的风险。

4. **设计分层的原因**  
   - **职责分离**：核心代码库和外围代码库分工明确。核心合约管理流动性和代币交换的底层逻辑，外围合约负责用户的实际交互操作。
   - **降低复杂性**：分离的设计避免了用户直接与复杂的核心合约交互，减少误操作的可能性，同时增加了多跳交易和流动性管理等实用功能。