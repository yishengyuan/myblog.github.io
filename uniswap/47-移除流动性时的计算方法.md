### 移除流动性时的计算方法

1. **燃烧流动性份额与移除代币数量**
   - 当我们向 Uniswap V2 配对合约添加流动性时，它会铸造流动性份额。如果我们销毁这些份额，那么应该提取多少 token X 和 token Y，才能确保移除流动性前后的价格保持不变？
   - 计算移除的 token 数量，公式相对简单，首先需要回顾流动性份额的计算。
2. **流动性份额的计算**
   - 设 s 为要销毁的份额数量，T 为总份额数，l0 为销毁份额前的流动性，L1 为销毁份额后的流动性。
   - 如果销毁 s 份额，则流动性减少的数量需要满足以下公式：
     - 流动性减少量 (l0 - L1) / l0 与要移除的 token 数量 DX / x0 和 DY / y0 成正比。这里的 DX 和 DY 分别是要移除的 token X 和 token Y 的数量，x0 和 y0 是销毁前池中的 token 数量。
3. **推导移除流动性时的公式**
   - 通过代数变换，公式可以简化为：
     - s / T = DX / x0
     - s / T = DY / y0
   - 从这些公式出发，可以得出 DX 和 DY 的计算方法：
     - DX = x0 * s / T
     - DY = y0 * s / T
4. **结论**
   - 通过上述公式，我们可以计算出在销毁流动性份额后需要移除的 token X 和 token Y 的数量，从而确保移除流动性前后的价格保持一致。