# 测试环境读取、部署、测试合约

## 首先我们来测试一下

---

## Typescript

```bash
yarn add -D ts-node typescript 
```

## 测试之前

---

```bash
hardhat.config.js -> hardhat.config.ts

import type { HardhatUserConfig } from "hardhat/config";

import "@nomicfoundation/hardhat-toolbox";

  

const config: HardhatUserConfig = {

  solidity: "0.8.24",

};

  
export default config;

 
```

## 写测试

---

```bash
import "@nomicfoundation/hardhat-ethers";

  

import { ethers } from "hardhat";

import { expect } from "chai";


describe("Hello World", () => {

  //  set up

  // import contract

  // test action

    it("should get the hello world", async () => {

        const HW = await ethers.getContractFactory("HelloWorld");

        const hello = await HW.deploy();

        expect(await hello.hello()).to.equal("Hello, World!");

    });

});
```

## 注意 
```
	ts文件无需compile 
	sol文件更改后需要重新编译 
	
	推荐使用ts而不是js ts会有很多编译提示防止报错
```


## 安装测试类型依赖

---

```bash
yarn add -D @types/mocha
```

## Error

---

```bash
An unexpected error occurred:

error TS5109: Option 'moduleResolution' must be set to 'NodeNext' (or left unspecified) when option 'module' is set to 'NodeNext'.
```

## tsconfig

---

```bash
tsconfig.json
```

## Run Test

---

```bash

npx hardhat clean
npx hardhat compile
npx hardhat test

```