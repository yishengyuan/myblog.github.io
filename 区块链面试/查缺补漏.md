## yarn install 和npm install区别 
![[Pasted image 20251109104139.png]]  
![[Pasted image 20251109104157.png]]

![[Pasted image 20251109104221.png]]

## msg上下文
msg上下文https://www.cnblogs.com/wangerdan/articles/17859173.html

https://www.cnblogs.com/zhanchenjin/p/18411308



# cex项目

https://github.com/exchange-server/CoinExchange

这个是github开源的cex项目，先看百度网盘里面的，再看开源项目哈 


## 合约无法查看

安装的还是有问题 

npm install 
yarn install 有什么区别？ 

rm -rf node_modules && rm package-lock.json && npm install 
![[Pasted image 20251108120340.png]]
## 经常搞混。不知道钱从哪里到哪里 ？ 

//transfer nft->msg.sender

_transfer(address(this),msg.sender,tokenId);

  

//price->seller

// 把钱转给卖家

seller.transfer(token.price);

//listprice->owner

payable(owner()).transfer(listPrice);
## 文件看不了
![[Pasted image 20251108115144.png]]
## 系统怎么知道current token 是哪个？
function getCurrentToken() external view returns(ListedToken memory){



return idToListedToken[_tokenIds.current()];

}
## 查看hardhat版本
npm install --save-dev hardhat 
yarn add -D hardhat 


![[Pasted image 20251109105319.png]]

你当前使用的 Hardhat 版本（特别是 3.x 及之后的版本）**仅支持 ESM 模块格式**，而不是老的 CommonJS。

- **CommonJS (CJS)**：旧格式，用 `require()`、`module.exports`。
    
- **ESM (ECMAScript Modules)**：现代格式，用 `import`、`export`。

指定版本 ： npm install --save-dev hardhat@2.22.10

查看hardhat版本 
npx hardhat --version 
npx hardhat version

查看npm和yarn中的版本
npm list hardhat或
yarn list hardhat

## openzepplin缺失 


![[Pasted image 20251109152821.png]]

突然发现有个文件夹没有删掉。导致编译一直失败 
![[Pasted image 20251109154540.png]]

文件结构如上就可以了 多余的文件夹删除掉。
## 版本过高  nodejs 版本问题  
![[Pasted image 20251108200603.png]]

nvm 安装node
https://m.toutiao.com/video/7289085888028639798/?upstream_biz=toutiao_pc
https://titangene.github.io/article/nvm.html

![[Pasted image 20251108213438.png]]
node -v 
# 安装jdk17版本测试 


虚拟机 virtual Box 
docker里面安装jdk
![[Pasted image 20251108203631.png]]
## 监听 java项目
## 安装版本jdk8
jdk8 安装

![[Pasted image 20251108203505.png]]


## 合约开发 java开发相差2000k
后期可以转合约开发


## 职业规划
![[Pasted image 20251108222033.png]]



敲代码 敲一遍



## 关于接口实现和源码查看

**1. IERC20接口的实现**

你看到的 [IERC20.sol](vscode-file://vscode-app/private/var/folders/7k/b3nkgdgx4_933y6x1b0ky9h80000gn/T/AppTranslocation/3C9288B9-4941-48E9-B369-3C6A540FBA1F/d/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) 是一个接口（interface），它只定义了函数签名，没有实际的实现代码。接口的作用是：

- 定义标准的函数签名
- 让其他合约可以与实现了这些函数的合约进行交互
- 提供类型安全的编译时检查

**2. 源码实现的位置**

在这个项目中有几种情况：

1. **项目内部实现**: [ERC20.sol](vscode-file://vscode-app/private/var/folders/7k/b3nkgdgx4_933y6x1b0ky9h80000gn/T/AppTranslocation/3C9288B9-4941-48E9-B369-3C6A540FBA1F/d/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) 包含了一个完整的ERC20实现
2. **外部合约**: 当使用 `IERC20(DAI)` 这样的代码时，它是在与部署在以太坊主网上的真实DAI代币合约交互

**3. 编译器如何知道使用哪个版本**

从你的项目配置可以看到：

这告诉编译器：

- 使用Solidity 0.8.24版本
- 这是一个固定版本（没有使用`^`或`~`符号）
- 编译器会严格使用这个版本编译

**4. 依赖管理**

这个Foundry项目使用了以下依赖管理方式：

- **Git子模块**: [forge-std](vscode-file://vscode-app/private/var/folders/7k/b3nkgdgx4_933y6x1b0ky9h80000gn/T/AppTranslocation/3C9288B9-4941-48E9-B369-3C6A540FBA1F/d/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) 是一个git子模块，包含Foundry的测试库
- **直接引用**: 项目通过 `Constants.sol` 引用主网上的合约地址

让我查看Constants.sol：

Read [Constants.sol](vscode-file://vscode-app/private/var/folders/7k/b3nkgdgx4_933y6x1b0ky9h80000gn/T/AppTranslocation/3C9288B9-4941-48E9-B369-3C6A540FBA1F/d/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html), lines 1 to 20

## 总结

1. **接口vs实现**: [IERC20.sol](vscode-file://vscode-app/private/var/folders/7k/b3nkgdgx4_933y6x1b0ky9h80000gn/T/AppTranslocation/3C9288B9-4941-48E9-B369-3C6A540FBA1F/d/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)是接口，[ERC20.sol](vscode-file://vscode-app/private/var/folders/7k/b3nkgdgx4_933y6x1b0ky9h80000gn/T/AppTranslocation/3C9288B9-4941-48E9-B369-3C6A540FBA1F/d/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html)是实现。在测试中使用`IERC20(DAI)`是将主网DAI合约地址转换为IERC20接口类型。
    
2. **版本控制**:
    
    - Solidity版本通过`pragma solidity 0.8.24;`固定
    - 依赖库通过git子模块管理（需要运行`git submodule update --init`来获取）
3. **源码查看**:
    
    - 项目内部合约源码在`src/`目录
    - 外部合约（如DAI）的源码需要在Etherscan等区块链浏览器查看
    - 你可以访问 [https://etherscan.io/address/0x6B175474E89094C44Da98b954EedeAC495271d0F](vscode-file://vscode-app/private/var/folders/7k/b3nkgdgx4_933y6x1b0ky9h80000gn/T/AppTranslocation/3C9288B9-4941-48E9-B369-3C6A540FBA1F/d/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) 查看DAI合约源码
4. **编译器工作原理**: Foundry编译器会根据import路径查找合约，优先级是：
    
    - 相对路径（`../../src/interfaces/IERC20.sol`）
    - lib目录中的依赖库
    - node_modules（如果使用）
    - 




