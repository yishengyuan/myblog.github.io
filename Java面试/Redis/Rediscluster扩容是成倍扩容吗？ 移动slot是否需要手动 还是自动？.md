### 1️⃣ Redis Cluster 扩容方式

Redis Cluster 的扩容并不是严格“成倍”扩容，而是 **按节点数量扩容**，Redis Cluster 有 16384 个槽（slot），节点越多，每个节点负责的槽越少。

- 每个节点负责若干 slot
    
- 扩容时新增节点，集群会把 slot 从老节点迁移到新节点
    
- 节点数量不需要成倍增长，可以按实际需要增加一个或多个节点
    

**总结**：扩容可以 1 个节点，也可以多节点，并不是必须成倍扩容。

---

### 2️⃣ Slot 迁移方式

当新增节点加入 Cluster 后，需要将部分 slot 从老节点迁移到新节点，以均衡负载。迁移方式有两种：

#### a) 手动迁移

- 使用 `redis-cli --cluster reshard` 命令
    
- 可以指定：
    
    - 要迁移的 slot 范围
        
    - 源节点和目标节点
        
    - 迁移数量
        
- 优点：可控
    
- 缺点：操作复杂，需要人工干预
    

示例：

`redis-cli --cluster reshard 127.0.0.1:7000`

然后按照提示选择迁移 slot 的数量和目标节点。

---

#### b) 自动迁移

- Redis Cluster **没有完全自动 slot 迁移机制**
    
- 一些管理工具（比如 **Redis-trib.rb / redis-cli --cluster** 工具）可以在扩容时帮你自动分配 slot 并迁移
    
- 但 Redis 核心本身不会自动把 slot 迁移到新节点，需要通过工具或脚本触发 `reshard`
    

⚠️ 注意：扩容后新节点不会自动承担 slot，必须触发 reshard，否则数据不会均衡。

---

### 3️⃣ 总结

| 问题          | 回答                                                      |
| ----------- | ------------------------------------------------------- |
| 扩容是否成倍      | 不必须，可以按需增加 1 个或多个节点                                     |
| slot 移动是否自动 | 核心 Redis 不自动，需要手动 `reshard` 或用 cluster 工具               |
| 推荐做法        | 扩容后使用 `redis-cli --cluster reshard` 自动化脚本迁移 slot，实现负载均衡 |